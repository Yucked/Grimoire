@page "/{SourceId}/{MangaId}/{Chap:int}"

@using Grimoire.Sources.Models
@using Grimoire.Web.Cache

@inject CacheHandler CacheHandler

<div class="container">
    @if (_chapter == default) {
        <WaitingOn/>
    }
    else {
        @foreach (var chapterPage in _chapter.Pages) {
            <img src="@chapterPage.Value" alt="@chapterPage.Key">
        }
    }
</div>

@code {

    [Parameter]
    public string SourceId { get; set; }

    [Parameter]
    public string MangaId { get; set; }

    [Parameter]
    public int Chap { get; set; }

    private Chapter _chapter;

    protected override async Task OnInitializedAsync() {
        _chapter = await CacheHandler.GetChapterAsync(SourceId, MangaId, Chap);
    }

}